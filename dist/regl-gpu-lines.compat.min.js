!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).reglLines=e()}(this,(function(){"use strict";function n(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function e(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function t(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,o,i=[],a=!0,s=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(n){s=!0,o=n}finally{try{a||null==t.return||t.return()}finally{if(s)throw o}}return i}(n,e)||i(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable,non-array objects must have a [Symbol.iterator]()method.")}()}function o(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||i(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable,non-array objects must have a [Symbol.iterator]()method.")}()}function i(n,e){if(n){if("string"==typeof n)return a(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(n,e):void 0}}function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function s(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=i(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable,non-array objects must have a [Symbol.iterator]()method.")}var a,s=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return s=n.done,n},e:function(n){c=!0,a=n},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw a}}}}var c={CAP_START:0,CAP_END:1,CAP_SHORT:2},f=c,u=function(n,t,r,i,a,c,u,p,l,d,v,h){var m=t?p:u,y=["B","C","D"];t||y.unshift("A");var b={},g={},C=l.concat(m.attrs);if(i){g.vao=n.prop("vao");for(var w=0;w<C.length;w++)b[C[w].name]=w}else{var x,A=s(C);try{for(A.s();!(x=A.n()).done;){var B=x.value;b[B.name]=B.spec}}catch(n){A.e(n)}finally{A.f()}}var _=r?t?function(n){return[n.capRes2,Math.max(n.capRes2,n.joinRes2)]}:function(n){return[Math.max(n.capRes2,n.joinRes2),Math.max(n.capRes2,n.joinRes2)]}:t?function(n){return[n.capRes2,n.joinRes2]}:function(n){return[n.joinRes2,n.joinRes2]};return n(e(e({vert:"".concat(a.glsl,"\nconst float CAP_START=").concat(f.CAP_START,".0;const float CAP_END=").concat(f.CAP_END,".0;").concat(m.glsl,"\nattribute float index;").concat(h?"attribute float debugInstanceID;":"","\nuniform bool _isRound;uniform vec2 _vertCnt2,_capJoinRes2;uniform vec2 _resolution,_capScale;uniform float _miterLimit;").concat(a.orientation||!t?"":"uniform float _orientation;","\nvarying vec3 lineCoord;").concat(h?"varying vec2 triStripCoord;":"","\n").concat(h?"varying float instanceID;":"","\n").concat(h?"varying float vertexIndex;":"","\nbool isnan(float val){return(val<0.0||0.0<val||val==0.0)?false:true;}bool invalid(vec4 p){return p.w==0.0||isnan(p.x);}void main(){const float pi=3.141592653589793;").concat(h?"vertexIndex=index;":"","\nlineCoord=vec3(0);").concat(h?"instanceID=".concat(t?"-1.0":"debugInstanceID",";"):"","\n").concat(h?"triStripCoord=vec2(floor(index/2.0),mod(index,2.0));":"","\n").concat(y.map((function(n){return"vec4 p".concat(n,"=").concat(a.position.generate(n),";")})).join("\n"),"\ngl_Position=pB;bool aInvalid=").concat(t?"false":"invalid(pA)",";bool bInvalid=invalid(pB);bool cInvalid=invalid(pC);bool dInvalid=invalid(pD);vec2 v=_vertCnt2+3.0;float N=dot(v,vec2(1));bool mirror=index>=v.x;").concat(t?"if(dInvalid && mirror)return;":"","\nfloat pw=mirror?pC.w:pB.w;").concat(y.map((function(n){return"p".concat(n,"=vec4(vec3(p").concat(n,".xy*_resolution,p").concat(n,".z)/p").concat(n,".w,1);")})).join("\n"),"\n").concat(t?"vec4 pA=pC;":"","\nif(bInvalid||cInvalid||max(abs(pB.z),abs(pC.z))>1.0)return;if(mirror){vec4 vTmp=pC; pC=pB; pB=vTmp;vTmp=pD; pD=pA; pA=vTmp;bool bTmp=dInvalid; dInvalid=aInvalid; aInvalid=bTmp;}").concat(t?"bool isCap=!mirror;":"".concat(r?"":"const ","bool isCap=false"),";if(aInvalid){ ").concat(r?"pA=pC; isCap=true;":"pA=2.0*pB-pC;"," }if(dInvalid){ ").concat(r?"pD=pB;":"pD=2.0*pC-pB;"," }bool roundOrCap=_isRound||isCap;float width=mirror?").concat(a.width.generate("C"),":").concat(a.width.generate("B"),";vec2 tBC=pC.xy-pB.xy;float lBC=length(tBC);tBC/=lBC;vec2 nBC=vec2(-tBC.y,tBC.x);vec2 tAB=pB.xy-pA.xy;float lAB=length(tAB);if(lAB>0.0)tAB/=lAB;vec2 nAB=vec2(-tAB.y,tAB.x);vec2 tCD=pD.xy-pC.xy;float lCD=length(tCD);if(lCD>0.0)tCD/=lCD;vec2 nCD=vec2(-tCD.y,tCD.x);float cosB=clamp(dot(tAB,tBC),-1.0,1.0);const float tol=1e-4;float mirrorSign=mirror?-1.0:1.0;float dirB=-dot(tBC,nAB);float dirC=dot(tBC,nCD);bool bCollinear=abs(dirB)<tol;bool cCollinear=abs(dirC)<tol;bool bIsHairpin=bCollinear && cosB<0.0;dirB=bCollinear?-mirrorSign:sign(dirB);dirC=cCollinear?-mirrorSign:sign(dirC);vec2 miter=bIsHairpin?-tBC:0.5*(nAB+nBC)*dirB;//Compute our primary \"join index\",that is,the index starting at the very first point of the join.\nfloat i=mirror?N-index:index;float res=(isCap?_capJoinRes2.x:_capJoinRes2.y);i-=max(0.0,(mirror?_vertCnt2.y:_vertCnt2.x)-res);i+=(dirB<0.0?-1.0:0.0);i-=mirror?1.0:0.0;i=max(0.0,i);vec2 xBasis=tBC;vec2 yBasis=nBC*dirB;vec2 xy=vec2(0);lineCoord.y=dirB*mirrorSign;if(i==res+1.0){float m=cosB>-0.9999?(tAB.x*tBC.y-tAB.y*tBC.x)/(1.0+cosB):0.0;xy=vec2(min(abs(m),min(lBC,lAB)/width),-1);lineCoord.y=-lineCoord.y;} else {float m2=dot(miter,miter);float lm=sqrt(m2);yBasis=miter/lm;xBasis=dirB*vec2(yBasis.y,-yBasis.x);bool isBevel=1.0>_miterLimit*m2;if(mod(i,2.0)==0.0){if(roundOrCap||i !=0.0){float theta=-0.5*(acos(cosB)*(clamp(i,0.0,res)/res)-pi)*(isCap?2.0:1.0);xy=vec2(cos(theta),sin(theta));if(isCap){if(xy.y>0.001)xy*=_capScale;lineCoord.xy=xy.yx*lineCoord.y;}} else {yBasis=bIsHairpin?vec2(0):miter;xy.y=isBevel?1.0:1.0/m2;}} else {lineCoord.y=0.0;if(isBevel && !roundOrCap){xy.y=-1.0+sqrt((1.0+cosB)*0.5);}}}").concat(t?"float _orientation=".concat(a.orientation?a.orientation.generate(""):"mod(_orientation,2.0)",";"):"",";").concat(t?"if(_orientation==CAP_END)lineCoord.xy=-lineCoord.xy;":"","\nvec2 dP=mat2(xBasis,yBasis)*xy;float dx=dot(dP,tBC)*mirrorSign;float useC=(mirror?1.0:0.0)+dx*(width/lBC);lineCoord.z=useC<0.0||useC>1.0?1.0:0.0;").concat(o(a.varyings.values()).map((function(n){return n.generate("useC","B","C")})).join("\n"),"\ngl_Position=pB;gl_Position.xy+=width*dP;gl_Position.xy/=_resolution;gl_Position*=pw;").concat(a.postproject?"gl_Position=".concat(a.postproject,"(gl_Position);"):"","\n}"),frag:c,attributes:b,uniforms:e(e({},v),{},{_vertCnt2:function(n,e){return _(e)},_capJoinRes2:function(n,e){return[e.capRes2,e.joinRes2]},_miterLimit:function(n,e){return e.miterLimit*e.miterLimit},_orientation:n.prop("orientation"),_capScale:n.prop("capScale"),_isRound:function(n,e){return"round"===e.join},_resolution:function(n,e){return e.viewportSize||[n.viewportWidth,n.viewportHeight]}}),primitive:"triangle strip",instances:t?function(n,e){return e.splitCaps?e.orientation===f.CAP_START?Math.ceil(e.count/2):Math.floor(e.count/2):e.count}:function(n,e){return e.count-3},count:function(n,e){var t=_(e);return 6+(t[0]+t[1])}},d),g))};var p={NONE:0,REGULAR:1,EXTENDED:2,PER_INSTANCE:4},l=p,d=function(n){for(var t=[],r=n.split("\n"),o=0;o<r.length;o++)r[o]=r[o].replace(v,(function(n,e){return t.push(C(e)),""}));return e({glsl:r.join("\n").trim()},function(n){var e,t,r,o,i,a=new Map,c=new Map,f=s(n);try{for(f.s();!(t=f.n()).done;){var u=t.value;"attribute"===u.type?(a.set(u.name,u),u.vertexUsage=l.NONE,u.endpointUsage=l.NONE):"varying"===u.type?c.set(u.name,u):"postproject"===u.type&&(e=u.name)}}catch(n){f.e(n)}finally{f.f()}var p,d=s(n);try{for(d.s();!(p=d.n()).done;){var v=p.value;if("property"===v.type){switch(v.property){case"width":if(r)throw new Error('Unexpected duplicate pragma for property "'.concat(v.property,'"'));r=v;break;case"position":if(o)throw new Error('Unexpected duplicate pragma for property "'.concat(v.property,'"'));o=v;break;case"orientation":if(i)throw new Error('Unexpected duplicate pragma for property "'.concat(v.property,'"'));i=v;break;default:throw new Error('Invalid pragma property "'.concat(v.property,'"'))}var h,m=s(v.inputs);try{for(m.s();!(h=m.n()).done;){var y=h.value;if(!a.has(y))throw new Error("Missing attribute ".concat(y," of property ").concat(v.property))}}catch(n){m.e(n)}finally{m.f()}}}}catch(n){d.e(n)}finally{d.f()}var b,g=s(n);try{for(g.s();!(b=g.n()).done;){var C=b.value;if(C.inputs){var w,x=s(C.inputs);try{for(x.s();!(w=x.n()).done;){var A=w.value,B=a.get(A);"property"!==C.type&&"varying"!==C.type||("position"===C.property?(B.vertexUsage|=l.EXTENDED,B.endpointUsage|=l.EXTENDED):"orientation"===C.property?B.endpointUsage|=l.PER_INSTANCE:(B.endpointUsage|=l.REGULAR,B.vertexUsage|=l.REGULAR))}}catch(n){x.e(n)}finally{x.f()}}}}catch(n){g.e(n)}finally{g.f()}return{varyings:c,attrs:a,width:r,position:o,orientation:i,postproject:e}}(t))},v=/^\s*#pragma\s+lines\s*:\s*([^;]*);?$/i,h=/^\s*attribute\s+(float|vec2|vec3|vec4)\s+([\w\d_]+)\s*$/i,m=/^\s*(position|width|orientation)\s+=\s+([\w\d_]+)\s*\(([^)]*)\)\s*$/i,y=/^\s*(?:(extrapolate)?)\s*varying\s+(float|vec2|vec3|vec4)\s+([\w\d_]+)\s*=\s*([\w\d_]+)\(([^)]*)\)\s*$/,b=/^\s*postproject\s+=\s+([\w\d_]+)\s*$/i,g={float:1,vec2:2,vec3:3,vec4:4};function C(n){var e;if(e=(n=n.trim()).match(h))return{type:"attribute",dimension:g[e[1]],name:e[2]};if(e=n.match(m)){var t=e[1],r={width:"float",position:"vec4",orientation:"bool"}[t],o=e[2],i=e[3].split(",").map((function(n){return n.trim()})).filter((function(n){return!!n}));return{type:"property",property:t,returnType:r,name:o,inputs:i,generate:function(n,e){return"".concat(o,"(").concat(i.map((function(t){return(e||"")+t+n})).join(","),")")}}}if(e=n.match(y)){var a="extrapolate"===e[1],s=e[2],c=e[3],f=e[4],u=e[5].split(",").map((function(n){return n.trim()})).filter((function(n){return!!n}));return{type:"varying",returnType:s,name:c,getter:f,inputs:u,generate:function(n,e,t){var r=a?n:"clamp(".concat(n,",0.0,1.0)");return"".concat(c,"=").concat(f,"(").concat(u.map((function(n){return"mix(".concat(n+e,",").concat(n+t,",").concat(r,")")})).join(","),");")}}}if(e=n.match(b))return{type:"postproject",name:e[1]};throw new Error('Unrecognized lines pragma:"'.concat(n,'"'))}var w=[];w[5120]=1,w[5122]=2,w[5124]=4,w[5121]=1,w[5123]=2,w[5125]=4,w[5126]=4;var x=function(n,e,t){var o={};if(!e)return o;var i,a=s(n.attrs);try{for(a.s();!(i=a.n()).done;){var c=r(i.value,2),f=c[0],u=c[1],p=e[f];if(t?u.endpointUsage:u.vertexUsage){var l={buffer:null,dimension:u.dimension,offset:0,type:NaN,stride:NaN,divisor:1,bytesPerElement:NaN};if(!p)throw new Error("Missing buffer for ".concat(t?"endpoint":"vertex"," attribute '").concat(f,"'"));if("buffer"===p._reglType)l.buffer=p,l.type=l.buffer._buffer.dtype;else{if("buffer"!==p.buffer._reglType)throw new Error("Invalid buffer for attribute '".concat(f,"'"));if(l.buffer=p.buffer,_(p,"dimension")&&p.dimension!==l.dimension)throw new Error("Size of attribute(".concat(p.dimension,")does not match dimension specified in shader pragma(").concat(u.dimension,")"));_(p,"offset")&&(l.offset=p.offset),_(p,"type")?l.type=B[p.type]:l.type=l.buffer._buffer.dtype,_(p,"divisor")&&(l.divisor=p.divisor),_(p,"stride")&&(l.stride=p.stride)}l.bytesPerElement=A[l.type],Number.isNaN(l.stride)&&(l.stride=l.bytesPerElement*u.dimension),o[f]=l}}}catch(n){a.e(n)}finally{a.f()}return o},A=w,B={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126};function _(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var j=[];j[1]="float",j[2]="vec2",j[3]="vec3",j[4]="vec4";var E=function(n,e,t){var r=t?["B","C","D"]:["A","B","C","D"],o=[],i=[];return n.attrs.forEach((function(n,e){var a=t?n.endpointUsage:n.vertexUsage;if(a){var s=[];if(a&D.PER_INSTANCE&&u(0,""),a&D.REGULAR||a&D.EXTENDED)for(var c=0;c<r.length;c++){var f=r[c];(a&D.EXTENDED||"D"!==f&&"A"!==f)&&u(c,f)}o.push("attribute ".concat(T[n.dimension]," ").concat(s.join(","),";"))}function u(n,r){var o=e+r;if(s.push(o),t){var c=a&D.PER_INSTANCE?1:3;i.push({name:o,spec:{buffer:function(n,t){return t.buffers[e].buffer},offset:function(t,r){return r.buffers[e].offset+r.buffers[e].stride*((r.orientation!==I.CAP_START&&r.splitCaps?3:0)+n)},stride:function(n,t){return t.buffers[e].stride*c*(t.splitCaps?2:1)},divisor:function(n,t){return t.buffers[e].divisor}}})}else i.push({name:o,spec:{buffer:function(n,t){return t.buffers[e].buffer},offset:function(t,r){return r.buffers[e].offset+r.buffers[e].stride*n},stride:function(n,t){return t.buffers[e].stride},divisor:function(n,t){return t.buffers[e].divisor}}})}})),n.varyings.forEach((function(n,e){o.push("varying ".concat(n.returnType," ").concat(e,";"))})),{glsl:o.join("\n"),attrs:i}},D=p,T=j,I=c;var R=u,P=d,S=x,N=E,O=function(n,e,t){return function(r){if(!r)return t;if(-1===e.indexOf(r))throw new Error("Invalid ".concat(n," type. Valid options are:").concat(e.join(","),"."));return r}},M=c,k=X;X.CAP_START=M.CAP_START,X.CAP_END=M.CAP_END;var U=new Set(["attributes","elements"]),L=["round","bevel","miter"],z=["round","square","none"],q=[1,1],H=[2,2/Math.sqrt(3)];function $(n,e,t){return(n?1:0)+(e?2:0)+(t?4:0)}function X(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.vert,a=void 0===i?null:i,c=t.frag,f=void 0===c?null:c,u=t.debug,p=void 0!==u&&u,l=t.reorder,d=void 0!==l&&l;n._gpuLinesCache||(n._gpuLinesCache={});for(var v=n._gpuLinesCache,h=e({},t),m=t.uniforms||{},y=0,b=["vert","frag","debug","reorder","uniforms"];y<b.length;y++){var g=b[y];delete h[g]}var C=Object.keys(h);if(C.forEach((function(n){if(U.has(n))throw new Error("Invalid parameter '".concat(n,"'. Parameters ").concat(o(U).map((function(n){return"'".concat(n,"'")})).join(",")," may not be forwarded to regl."))})),!a)throw new Error("Missing vertex shader,`vert`");if(!f)throw new Error("Missing fragment shader,`frag`");var w=P(a),x=N(w,n,!1),A=N(w,n,!0),B=[];p&&(v.debugInstanceIDBuffer||(v.debugInstanceIDBuffer=n.buffer(new Uint16Array(o(Array(16384).keys())))),B.push({name:"debugInstanceID",spec:{buffer:v.debugInstanceIDBuffer,divisor:1}})),v.indexBuffer||(v.indexBuffer=n.buffer(new Uint8Array(o(Array(134).keys())))),B.push({name:"index",spec:{buffer:v.indexBuffer,divisor:0}});var _=O("join",L,"miter"),j=O("cap",z,"square"),E=new Map;function D(e){return E.has(e)||E.set(e,R(n,1&e,2&e,4&e,w,f,x,A,B,h,m,p)),E.get(e)}var T=[];function I(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];T.push.apply(T,e)}function k(){d&&T.sort((function(n,e){return n.featureMask-e.featureMask}));for(var n=0,e=[];n<T.length;){var t=T[n],r=t.featureMask,o=t.props;for(e.push(o);++n<T.length&&T[n].featureMask===r;)e.push(T[n].props);D(r)(e),e.length=0}T.length=0}var X=function(n){if(n){Array.isArray(n)||(n=[n]);var t,r=s(n);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=_(o.join),a=j(o.cap),c=!!o.vao,f=void 0===o.capResolution?12:o.capResolution;"square"===a?f=3:"none"===a&&(f=1);var u=1;"round"===i&&(u=void 0===o.joinResolution?8:o.joinResolution),f*=2,u*=2;var p="bevel"===i?1:void 0===o.miterLimit?4:o.miterLimit,l="square"===a?H:q,d=!!o.insertCaps,v={joinRes2:u,capRes2:f,capScale:l,join:i,miterLimit:p,insertCaps:d};if(o.endpointCount){var h=e(e({count:o.endpointCount},o),v),m=$(!0,d,c);if(c)if(w.orientation){var y={vao:h.vao.endpoints};I({featureMask:m,props:e(e({},h),y)})}else{var b={vao:h.vao.startCaps},g={vao:h.vao.endCaps};I({featureMask:m,props:e(e(e({},h),b),{},{orientation:M.CAP_START,splitCaps:!0})},{featureMask:m,props:e(e(e({},h),g),{},{orientation:M.CAP_END,splitCaps:!0})})}else h.buffers=S(w,o.endpointAttributes,!0),w.orientation?I({featureMask:m,props:e(e({},h),{},{splitCaps:!1})}):I({featureMask:m,props:e(e({},h),{},{orientation:M.CAP_START,splitCaps:!0})},{featureMask:m,props:e(e({},h),{},{orientation:M.CAP_END,splitCaps:!0})})}if(o.vertexCount){var C=$(!1,d,c),x=e(e({count:o.vertexCount},o),v);c?x.vao=o.vao.vertices:x.buffers=S(w,o.vertexAttributes,!1),I({featureMask:C,props:x})}k()}}catch(n){r.e(n)}finally{r.f()}}};return X.vao=function(e){var t={},o=[["vertices",x.attrs,e.vertexAttributes,!1]];w.orientation?o.push(["endpoints",A.attrs,e.endpointAttributes,!0,!1,null]):o.push(["startCaps",A.attrs,e.endpointAttributes,!0,!0,M.CAP_START],["endCaps",A.attrs,e.endpointAttributes,!0,!0,M.CAP_END]);for(var i=0,a=o;i<a.length;i++){var c=r(a[i],6),f=c[0],u=c[1],p=c[2],l=c[3],d=c[4],v=c[5];if(p){var h,m={buffers:S(w,p,l),splitCaps:d,orientation:v},y=[],b=s(B.concat(u));try{for(b.s();!(h=b.n()).done;){for(var g=h.value,C={},_=0,j=["buffer","divisor","offset","stride","normalized","dimension"];_<j.length;_++){var E=j[_],D=g.spec[E];D&&D.data&&(D=D.data),"function"==typeof D&&(D=D({},m)),void 0!==D&&(C[E]=D)}y.push(C)}}catch(n){b.e(n)}finally{b.f()}t[f]=n.vao(y)}}return t.destroy=function(){var n,e=s(o);try{for(e.s();!(n=e.n()).done;){var i=r(n.value,1)[0];t[i]&&(t[i].destroy(),delete t[i])}}catch(n){e.e(n)}finally{e.f()}},t},X}return k}));